$(document).ready(function(){function t(e){for(var t=window.location.search.substring(1).split("&"),o=0;o<t.length;o++){var a=t[o].split("=");if(a[0]==e)return decodeURIComponent(a[1])}return!1}function e(){fontSize=$(".base_size").val(),$.isNumeric(fontSize)?baseSize=fontSize/16:baseSize=0,$(".base_em").text(Math.round(1e3*baseSize)/1e3),o(),$(".js_param_size").text(fontSize),$(".article_container").css("font-size",Math.round(1e3*baseSize)/1e3+"em"),$(".js_css_font_size").text(fontSize)}function o(){scaleRatio=$(".font_scale").val(),d()}function s(){previewText=$(".preview_text").val(),$(".scale_preview_text, .article_header").text(previewText),$(".js_param_text").text(encodeURIComponent(previewText))}function n(){webFont=$(".js_web_font").val(),r(),webFontFamily=$(".js_web_font option:selected").data("font-family"),$(".scale_webfont, .article_content").attr("style","font-family:"+webFontFamily),$(".js_param_font").text(encodeURIComponent(webFont)),$(".js_css_font_family").text(webFontFamily)}function i(){fontWeight=$(".i_weight").val(),r(),$(".js_style_weight").html(".scale_webfont, .article_header {font-weight:"+fontWeight+";}"),$(".js_param_weight").text(fontWeight),$(".js_css_weight").text(fontWeight)}function l(){bodyFont=$(".js_body_font").val(),r(),bodyWebFontFamily=$(".js_body_font option:selected").data("font-family"),$(".js_style_body_font").html(".article_content p {font-family:"+bodyWebFontFamily+"}"),$(".js_param_body_font").text(encodeURIComponent(bodyFont)),$(".js_css_body_font_family").text(bodyWebFontFamily),u()}function c(){bodyFontWeight=$(".i_body_weight").val(),r(),$(".js_style_body_weight").html(".article_content p {font-weight:"+bodyFontWeight+";}"),$(".js_param_weight_headers").text(bodyFontWeight),$(".js_css_body_weight").text(bodyFontWeight)}function r(){googleFont=$(".js_web_font").val().replace(/\s/g,"+")+":"+$(".i_weight").val(),bodyGoogleFont=$(".js_body_font").val().replace(/\s/g,"+")+":"+$(".i_body_weight").val(),webFontUrl="https://fonts.googleapis.com/css?family="+googleFont+"|"+bodyGoogleFont,$(".webfont_url").attr("href",webFontUrl),$(".js_css_webfont_url").text(webFontUrl)}function _(){backgroundColor=$(".background_color").val(),$(".js_style_background_color").html(".article_preview_open {background-color:"+backgroundColor+";}"),$(".js_param_background_color").text(encodeURIComponent(backgroundColor)),$(".js_css_background_color").text(backgroundColor)}function h(){fontColor=$(".font_color").val(),$(".js_style_font_color").html(".article_preview_open {color:"+fontColor+";}"),$(".js_param_font_color").text(encodeURIComponent(fontColor)),$(".js_css_color").text(fontColor)}function f(){lineHeight=$(".js_line_height").val(),$(".js_style_line_height").html(".article_content {line-height:"+lineHeight+";}"),$(".js_param_line_height").text(encodeURIComponent(lineHeight)),$(".js_css_line_height").text(lineHeight)}function d(){a=baseSize,b=scaleRatio,result=baseSize,$($(".scale_high").get().reverse()).each(function(e){$(this).css("font-size",Math.round(1e3*result)/1e3+"em"),result=a*b,a=result}),a=1,b=scaleRatio,result=1,$($(".scale_high_label").get().reverse()).each(function(e){$(this).text(Math.round(1e3*result)/1e3+"em ("+(16*baseSize*result).toFixed(2)+"px)"),result=a*b,a=result}),a=1,b=scaleRatio,result=1,$($(".article_header").get().reverse()).each(function(e){result=a*b,a=result,$(this).css("font-size",Math.round(1e3*result)/1e3+"em")}),a=1,b=scaleRatio,result=1,$($(".js_css_header_size").get().reverse()).each(function(e){result=a*b,a=result,$(this).text(Math.round(1e3*result)/1e3)}),a=baseSize,b=scaleRatio,result=baseSize,$(".scale_low").each(function(e){result=a/b,a=result,$(this).css("font-size",Math.round(1e3*result)/1e3+"em")}),a=1,b=scaleRatio,result=1,$(".scale_low_label").each(function(e){result=a/b,a=result,$(this).text(Math.round(1e3*result)/1e3+"em ("+(16*baseSize*result).toFixed(2)+"px)")}),a=1,b=scaleRatio,result=1,$(".js_css_small_size").each(function(e){result=a/b,a=result,$(this).text(Math.round(1e3*result)/1e3)}),u()}function u(){$("body").delay(650).queue(function(e){$(this).css("min-height",$(".article_preview_inner").outerHeight()),e()})}"true"===t("preview")&&($(".article_preview_button").removeClass("fa-chevron-left").addClass("fa-times"),$(".article_preview").addClass("article_preview_open"),$(".article_content").focus()),$(".article_preview_button").click(function(){$(this).toggleClass("fa-times").toggleClass("fa-chevron-left"),$(".article_preview").toggleClass("article_preview_open"),$(".article_preview_open .article_content").focus()}),$(".js_css_button").click(function(e){e.preventDefault(),$(this).children(".fa").toggleClass("fa-times").toggleClass("fa-chevron-down")}),$(".js_link_reset").click(function(e){e.preventDefault(),location.reload(!0)}),$(".js_permalink").click(function(e){e.preventDefault(),$(".js_permalink_field").val($(".js_param_url").text()).toggle().select()}),$(".js_permalink_field").click(function(){$(this).val($(".js_param_url").text()).select()}),$("[data-toggle]").click(function(e){e.preventDefault(),$($(this).data("toggle")).toggle()}),$(".js_scale_add_high").click(function(e){e.preventDefault(),$(".js_scale_add_high_section").after($(".js_scale_section_high").first().prop("outerHTML")),$(".js_scale_section_high").first().hide().show().css("color","#ff8787"),d()}),$(".js_scale_add_low").click(function(e){e.preventDefault(),$(".js_scale_add_low_section").before($(".js_scale_section_low").last().prop("outerHTML")),$(".js_scale_section_low").last().hide().show().css("color","#ff8787"),d()}),!1===t("size")?(baseSize=1,$(".base_size").val(16)):(baseSize=t("size")/16,$(".base_size").val(t("size"))),e(),$(".base_size").bind("change paste keyup",function(){e()}),!1===t("scale")?scaleRatio=1.25:(scaleRatio=t("scale"),$(".font_scale").val(scaleRatio),$(".font_scale").val()?$(".font_scale").val(scaleRatio):($(".js_scale_div").addClass("col_two_thirds"),$(".js_custom_scale_div").removeClass("hide").addClass("col_one_third"),$(".font_scale").val("custom"),$(".font_scale_custom input").val(scaleRatio)),$(".js_param_scale").text(scaleRatio)),d(),$(".font_scale").bind("change paste keyup",function(){"custom"===$(this).val()?($(".js_scale_div").addClass("col_two_thirds"),$(".js_custom_scale_div").removeClass("hide").addClass("col_one_third"),$(".font_scale_custom input").val(scaleRatio).focus().select()):(o(),$(".js_scale_div").removeClass("col_two_thirds"),$(".js_custom_scale_div").addClass("hide"),$(".js_param_scale").text($(this).val()))}),$(".font_scale_custom input").bind("change paste keyup",function(){scaleRatio=$(this).val(),d(),$(".js_param_scale").text($(this).val())}),!1!==t("text")&&($(".preview_text").val(t("text")),s()),$(".preview_text").bind("change paste keyup",function(){s()}),s(),$.getJSON("https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBExIvFSO_6mtbJ5upWmYq8kR967HqREYM",function(e){items=e.items,listElements="",items.forEach(function(e){"handwriting"===e.category?fallback="cursive":"display"===e.category?fallback="sans-serif":fallback=e.category,setWebFontListFamily="'"+e.family+"', "+fallback,listElements+='<option value="'+e.family+'" data-font-family="'+setWebFontListFamily+';">'+e.family+"</option>"}),$(".js_web_font, .js_body_font").append(listElements).val("Griffy"),n(),!1!==t("font")&&($(".js_web_font").val(t("font")),n()),!1!==t("fontweight")&&($(".i_weight").val(t("fontweight")),i()),!1!==t("bodyfont")&&($(".js_body_font").val(t("bodyfont")),l()),!1!==t("bodyfontweight")&&($(".i_body_weight").val(t("bodyfontweight")),c())}),$(".js_web_font").bind("change paste keyup",function(){n()}),$(".i_weight").bind("change paste keyup",function(){i()}),$(".js_body_font").bind("change paste keyup",function(){l()}),$(".i_body_weight").bind("change paste keyup",function(){c()}),!1!==t("backgroundcolor")&&($(".background_color").val(t("backgroundcolor")),_()),$(".background_color").bind("change paste keyup",function(){_()}),!1!==t("fontcolor")&&($(".font_color").val(t("fontcolor")),h()),$(".font_color").bind("change paste keyup",function(){h()}),!1!==t("lineheight")&&($(".js_line_height").val(t("lineheight")),f()),$(".js_line_height").bind("change paste keyup",function(){f()})}),$(document).ready(function(){$(".codepen_btn").hover(function(){$(".codepen_able").each(function(){el=$(this),type=el.data("type"),codeInside=el.find("code"),isCodeInside=codeInside.length,HTML="",CSS="","html"==type?codeInside?HTML=codeInside.html():HTML=el.html():"css"==type&&(codeInside?CSS=codeInside.text():CSS=el.html()),previewText=$(".preview_text").val(),data={title:"A Type Scale",description:"Custom type scale and CSS from https://type-scale.com",html:HTML+"<h1>"+previewText+"</h1>\n\n<p>What looked like a small patch of purple grass, above five feet square, was moving across the sand in their direction. When it came near enough he perceived that it was not grass; there were no blades, but only purple roots. The roots were revolving, for each small plant in the whole patch, like the spokes of a rimless wheel.</p>\n\n<h2>"+previewText+"</h2>\n\n<p>What looked like a small patch of purple grass, above five feet square, was moving across the sand in their direction. When it came near enough he perceived that it was not grass; there were no blades, but only purple roots. The roots were revolving, for each small plant in the whole patch, like the spokes of a rimless wheel.</p>\n\n<h3>"+previewText+"</h3>\n\n<p>What looked like a small patch of purple grass, above five feet square, was moving across the sand in their direction. When it came near enough he perceived that it was not grass; there were no blades, but only purple roots. The roots were revolving, for each small plant in the whole patch, like the spokes of a rimless wheel.</p>\n\n<h4>"+previewText+"</h4>\n\n<p>What looked like a small patch of purple grass, above five feet square, was moving across the sand in their direction. When it came near enough he perceived that it was not grass; there were no blades, but only purple roots. The roots were revolving, for each small plant in the whole patch, like the spokes of a rimless wheel.</p>\n\n<h5>"+previewText+'</h5>\n\n<p>What looked like a small patch of purple grass, above five feet square, was moving across the sand in their direction. When it came near enough he perceived that it was not grass; there were no blades, but only purple roots. The roots were revolving, for each small plant in the whole patch, like the spokes of a rimless wheel.</p>\n\n<p class="text_small">— Excerpt from A Voyage to Arcturus, by David Lindsay.</p>',css:CSS};var e=JSON.stringify(data);$(".codepen_json").val(e)})})});